(this["webpackJsonppt-client"]=this["webpackJsonppt-client"]||[]).push([[0],{13:function(e,t,a){e.exports=a(22)},18:function(e,t,a){},22:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(10),i=a.n(l);a(18),a(9);function c(){return r.a.createElement("div",{style:o},r.a.createElement("h1",{style:{fontWeight:700,fontStyle:"bold"}},"$ Price Tracker"),"Get your favourite product at the best price possible!")}var o={display:"flex",justifyContent:"center",alignItems:"center",minHeight:"20vh",textAlign:"center",flexDirection:"column"},s=a(7),u=a(6),m=a(1),h=a(2),d=a(5),p=a(4),f=a(11),b=a(3),v=b.baseUrl,g=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={heading:"Price Chart",currentPrice:e.props.currentPrice,options:{title:"Price of the Product",legend:{position:"bottom"},animation:{duration:1e3,easing:"in",startup:!0}}},e.subscribe=function(){e.setState({buttonClicked:!0})},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this;!1===this.state.currentPrice&&fetch(v+"/currentPrice",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:this.props.url})}).then((function(e){return e.json()})).then((function(t){e.setState({currentPrice:t.currentPrice})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h2",null,this.state.heading),r.a.createElement(f.a,{chartType:"LineChart",width:"100%",height:"400px",data:this.props.data,options:this.state.options}),r.a.createElement("div",{className:"flex"},r.a.createElement("div",null,"Average Price: ",E(this.props.data)),r.a.createElement("div",null,"Minimum Price: ",y(this.props.data)),r.a.createElement("div",null,"Current Price: ",this.props.currentPrice)))}}]),a}(r.a.Component),E=function(e){var t,a=0,n=Object(s.a)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;r[1]&&!Number.isNaN(Number.parseFloat(r[1]))&&(a+=Number.parseFloat(r[1]))}}catch(l){n.e(l)}finally{n.f()}return(a/(e.length-1)).toLocaleString("en-IN")},y=function(e){var t,a=1/0,n=Object(s.a)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;r[1]&&!Number.isNaN(Number.parseFloat(r[1]))&&(a=Math.min(a,Number.parseFloat(r[1])))}}catch(l){n.e(l)}finally{n.f()}return a!==1/0?a.toLocaleString("en-IN"):"Not Available"};g.defaultProps={currentPrice:20,data:[["Date","Price"],["27-09-2020",1030],["29-09-2020",1170],["30-09-2020",660],["30-09-2020",660],["30-09-2020",660],["30-09-2020",660],["30-09-2020",660],["30-09-2020",660],["30-09-2020",660],["30-09-2020",660],["30-09-2020",660],["30-09-2020",660]]};var P=b.baseUrl,N=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={name:"",email:"",budget:"",maxPrice:e.props.maxPrice,requestProcessed:!1},e.handleChange=function(t){var a=t.target.name;e.setState(Object(u.a)({},a,t.target.value))},e.handleSubmit=function(t){if(t.preventDefault(),""===e.state.name||""===e.state.email||""===e.state.budget)return alert("Please enter all 3 fields");fetch(P+"/fetchPrice",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:e.props.url,email:e.state.email,budget:e.state.budget})}).then((function(t){console.log(t),500!==t.status&&e.setState({requestProcessed:!0})})).catch((function(e){console.log(e)})),console.log("Submitted")},e}return Object(h.a)(a,[{key:"render",value:function(){return this.state.requestProcessed?r.a.createElement("div",{className:"flex col subscribe"},"Your Request has been processed. Thanks for using this product."):r.a.createElement("div",{className:"flex col subscribe"},r.a.createElement("h2",{align:"center"},"Please enter the following details"),r.a.createElement("form",null,r.a.createElement("div",null,r.a.createElement("label",{for:"name"},"Name"),r.a.createElement("input",{required:!0,type:"text",name:"name",className:"textbox",onChange:this.handleChange})),r.a.createElement("div",null,r.a.createElement("label",{for:"email"},"Email"),r.a.createElement("input",{required:!0,type:"email",name:"email",className:"textbox",onChange:this.handleChange})),r.a.createElement("div",null,r.a.createElement("label",{for:"budget"},"Maximum Budget ",r.a.createElement("span",{className:"smalltext"}," (You will be notified if the price drop is less than this)")),r.a.createElement("input",{required:!0,min:0,max:this.state.maxPrice,type:"number",name:"budget",className:"textbox range",onChange:this.handleChange})),r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("button",{type:"submit",className:"btn ",onClick:this.handleSubmit}," Subscribe! "))))}}]),a}(r.a.Component),x=b.baseUrl,C=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={loaded:!1,url:""},e.handleChange=function(t){var a,n=t.target.name;e.setState((a={},Object(u.a)(a,n,t.target.value),Object(u.a)(a,"loaded",!1),a))},e.hs=function(t){var a=e.trim(e.state.url);if(console.log("trimmed url",a),e.setState({url:a}),!a)return t.preventDefault(),alert("The url does not seem to be correct");fetch(x+"/chart",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:a})}).then((function(e){return e.json()})).then((function(t){var a=[];a.push(["Date","Price"]);var n=!1;if(!t.prices)return e.setState({data:a,loaded:!0});var r,l=Object(s.a)(t.prices);try{for(l.s();!(r=l.n()).done;){var i=r.value,c=i.date,o=i.price;n=(new Date).toLocaleDateString()===i.date?i.price:n,a.push([c,o])}}catch(u){l.e(u)}finally{l.f()}e.setState({data:a,currentPrice:n,loaded:!0})})).catch((function(e){console.log(e)})),t.preventDefault()},e}return Object(h.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"searchContainer"},r.a.createElement("div",{className:"flexchild"},r.a.createElement("h2",null,"Track Your Favourite Product"),r.a.createElement("p",{style:{color:"grey"}}," Please enter the following details: ")),r.a.createElement("form",{className:"flexchild"},r.a.createElement("label",{for:"Email"},"Amazon URL: "),r.a.createElement("input",{type:"url",required:!0,className:"textbox",name:"url",id:"url",onChange:this.handleChange}),r.a.createElement("button",{className:"btn",type:"submit",onClick:this.hs},"Submit"))),this.state.loaded?1!==this.state.data.length?r.a.createElement("div",{className:"searchContainer"},r.a.createElement(g,{data:this.state.data,url:this.state.url,currentPrice:this.state.currentPrice}),r.a.createElement(N,{url:this.state.url})):r.a.createElement("div",{className:"searchContainer"}," ",r.a.createElement("div",{className:"center"},"We do not have sufficient data to show the chart, please Subscribe "),r.a.createElement(N,{url:this.state.url})," "):"")}},{key:"trim",value:function(e){if((e=e.toLowerCase()).includes("amazon.in")){if(e.includes("gp/product/")){var t=e.split("gp/product/")[1];return!!t&&(t=t.split("/")[0],console.log(t),"https://www.amazon.in/gp/product/"+t)}if(e.includes("dp")){var a=e.split("dp/")[1];if(a)return a=(a=a.split("?")[0]).split("/")[0],console.log(a),"https://www.amazon.in/gp/product/"+a}}return!1}}]),a}(r.a.Component);function O(){return r.a.createElement("div",{style:S},r.a.createElement("div",null,"Bhanu Pratap Singh 2K18/CO/109"),r.a.createElement("div",null,"Arnav Garg 2K18/CO/087"))}var S={display:"flex",justifyContent:"center",alignItems:"center",minHeight:"10vh",textAlign:"center",flexDirection:"column",padding:"2em",paddingTop:"5em"};var j=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(c,null),r.a.createElement(C,null),r.a.createElement(O,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(j,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},3:function(e){e.exports=JSON.parse('{"baseUrl":"https://bhanu-amazon-price-tracker.herokuapp.com"}')},9:function(e,t,a){}},[[13,1,2]]]);
//# sourceMappingURL=main.8ab288ce.chunk.js.map